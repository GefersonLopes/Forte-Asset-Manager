<h2 mat-dialog-title class="text-xl font-semibold tracking-tight flex items-center gap-2 mb-1">
  <mat-icon fontSet="material-symbols-outlined" class="text-xl">badge</mat-icon>
  Novo Funcionário
</h2>

<form [formGroup]="form" (ngSubmit)="submit()" class="grid gap-4 p-4 pt-2">
  <mat-form-field appearance="fill" class="w-full">
    <mat-label>Nome</mat-label>
    <input matInput formControlName="name" required />
    @if (form.controls.name.touched && form.controls.name.hasError('required')) {
      <mat-error>Informe o nome</mat-error>
    }
    @if (form.controls.name.touched && form.controls.name.hasError('minlength')) {
      <mat-error>Mínimo de 2 caracteres</mat-error>
    }
  </mat-form-field>

  <mat-form-field appearance="fill" class="w-full">
    <mat-label>Email</mat-label>
    <input matInput formControlName="email" required type="email" />
    @if (form.controls.email.touched && form.controls.email.hasError('required')) {
      <mat-error>Informe o email</mat-error>
    }
    @if (form.controls.email.touched && form.controls.email.hasError('emailInvalid')) {
      <mat-error>Email inválido</mat-error>
    }
  </mat-form-field>

  <mat-form-field appearance="fill" class="w-full">
    <mat-label>CPF</mat-label>
    <input
      matInput
      formControlName="cpf"
      required
      inputmode="numeric"
      mask="000.000.000-00"
      [dropSpecialCharacters]="true"
    />
    @if (form.controls.cpf.touched && form.controls.cpf.hasError('required')) {
      <mat-error>Informe o CPF</mat-error>
    }
    @if (form.controls.cpf.touched && form.controls.cpf.hasError('cpfInvalid')) {
      <mat-error>CPF inválido</mat-error>
    }
  </mat-form-field>

  <mat-dialog-actions align="end" class="pt-2 flex justify-end gap-2">
    <button mat-stroked-button mat-dialog-close class="rounded-xl px-4 py-2 hover:bg-gray-100">
      Cancelar
    </button>

    <span class="inline-flex" [class.cursor-not-allowed]="form.invalid || form.pending">
      <button
        mat-flat-button
        color="primary"
        type="submit"
        [disabled]="form.invalid || form.pending"
        class="rounded-xl px-4 py-2 transition-colors"
        [ngClass]="
          form.invalid || form.pending
            ? 'border border-black bg-transparent text-black'
            : '!bg-black !text-white'
        "
      >
        Salvar
      </button>
    </span>
  </mat-dialog-actions>
</form>
